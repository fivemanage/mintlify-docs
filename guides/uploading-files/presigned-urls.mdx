---
title: "Presigned URLs"
---

# Presigned URLs

Presigned URLs is the safest way to upload files through the client. One example is from NUI in FiveM, where you otherwise would expose the token to every client if you're not using a presigned URL, or uploading your files from the server.

To get a presigned URL, you first need to request for it. Here we'll go through how you'd do it.

<Steps>
  ### Request the presigned URL

  Start by performing a `GET` request on the server. This needs to contain the endpoint and your API token.

  The `?fileType` param can be `image`, `audio` or `video`.

  <Info>
    We plan to remove this `?fileType` param in our next version of the API.
  </Info>
  <Tabs>
    <Tab title="Tab">
      ```curl
      curl --request GET \
        --url 'https://fmapi.net/api/v2/presigned-url?fileType=image' \
        --header 'Authorization: YOUR_API_TOKEN' \
      ```
    </Tab>
    <Tab title="Tab">
      ```js
      const options = {
        method: 'GET',
        headers: {
          'User-Agent': 'YOUR_SERVICE',
          Authorization: 'YOUR_API_TOKEN'
        }
      };
      
      fetch('https://fmapi.net/api/v2/presigned-url?fileType=image', options)
        .then(response => response.json())
        .then(response => console.log(response))
        .catch(err => console.error(err));
      ```
    </Tab>
  </Tabs>
  You will then get a response that looks like this:

  ```json
  {
    "data": {
      "presignedUrl": "https://fmapi.net/api/v2/presigned-url/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    },
    "status": "ok"
  }
  ```

  This is the url that you will be using in order to upload the file.

  ### Uploading files

  Once you have this URL, you can then use it to upload a file like you might previously have done, but without a `Authorization` header.

  <Tabs>
    <Tab title="Tab">
      ```curl
      curl --request POST \
        --url https://fmapi.net/api/v2/presigned-url/iCyMnIkzF423RQr88Hppo \
        --header 'Content-Type: multipart/form-data' \
        --form file=path/to/your/file.png
      ```
    </Tab>
    <Tab title="Tab">
      ```js
      const axios = require('axios');
      const fs = require('fs');
       
      const url = 'https://fmapi.net/api/v2/presigned-url/iCyMnIkzF423RQr88Hppo';
       
      const formData = new FormData();
       
      formData.append('file', fs.createReadStream('image.png'));
      // Optional metadata field (JSON string)
      formData.append("metadata", JSON.stringify({
          name: 'My image',
          description: 'This is my image',
      }));
       
      axios.post(url, formData).then(res => {
          console.log(res.data.url);
      }).catch(err => {
          console.error(err);
      });
      ```
    </Tab>
  </Tabs>
  #### Response

  ```json
  {
    "data": {
      "id": "7F9pGhN8qwErT1vx5aZk",
      "url": "https://i.fmfile.com/7F9pGhN8qwErT1vx5aZk.jpg"
    },
    "status": "ok"
  }
  ```
</Steps>